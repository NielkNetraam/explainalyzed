---
config:
theme: 'base'
themeVariables:
    primaryColor: '#BB2528'
    primaryTextColor: '#fff'
    primaryBorderColor: '#7C0000'
    lineColor: '#F8B229'
    secondaryColor: '#267826'
    tertiaryColor: '#fff'
---
flowchart TD
    classDef SOURCE stroke:Blue,fill:LightBlue,color:black
    classDef TARGET stroke:Green,fill:LightGreen,color:black
    classDef INTERMEDIATE stroke:DarkOrange,fill:Orange,color:black
    classDef INTERNAL stroke:Purple,fill:Violet,color:black

    relation_table:::SOURCE
    sample_table:::SOURCE
    sample_table_2:::SOURCE
    target:::TARGET
    internal:::INTERNAL

    subgraph relation_table
        relation_table.id1[id1]
        relation_table.id2[id2]
        relation_table.rel_type[rel_type]
    end

    subgraph sample_table
        sample_table.id[id]
        sample_table.name[name]
    end

    subgraph sample_table_2
        sample_table_2.id[id]
        sample_table_2.name[name]
    end

    subgraph target
        target.complex_id[complex_id]
        target.name_a[name_a]
        target.name_b[name_b]
        target.simple_id[simple_id]
    end

    subgraph internal
        internal.None[None]
    end

    internal.None -- COLUMN --> target.complex_id
    internal.None -- COLUMN --> target.simple_id
    relation_table.id1 -- JOIN --> target.complex_id
    relation_table.id1 -- JOIN --> target.name_a
    relation_table.id1 -- JOIN --> target.name_b
    relation_table.id1 -- JOIN --> target.simple_id
    relation_table.id2 -- JOIN --> target.complex_id
    relation_table.id2 -- JOIN --> target.name_a
    relation_table.id2 -- JOIN --> target.name_b
    relation_table.id2 -- JOIN --> target.simple_id
    relation_table.rel_type -- JOIN --> target.complex_id
    relation_table.rel_type -- JOIN --> target.name_a
    relation_table.rel_type -- JOIN --> target.name_b
    relation_table.rel_type -- JOIN --> target.simple_id
    sample_table.id -- COLUMN,JOIN --> target.complex_id
    sample_table.id -- FILTER,JOIN --> target.name_a
    sample_table.id -- FILTER,JOIN --> target.name_b
    sample_table.id -- COLUMN,JOIN --> target.simple_id
    sample_table.name -- FILTER,JOIN --> target.complex_id
    sample_table.name -- COLUMN,FILTER,JOIN --> target.name_a
    sample_table.name -- COLUMN,JOIN --> target.name_b
    sample_table.name -- FILTER,JOIN --> target.simple_id
    sample_table_2.id -- JOIN --> target.complex_id
    sample_table_2.id -- FILTER,JOIN --> target.name_a
    sample_table_2.id -- FILTER,JOIN --> target.name_b
    sample_table_2.id -- JOIN --> target.simple_id
    sample_table_2.name -- JOIN --> target.complex_id
    sample_table_2.name -- COLUMN,FILTER,JOIN --> target.name_a
    sample_table_2.name -- COLUMN,JOIN --> target.name_b
    sample_table_2.name -- JOIN --> target.simple_id
